# ğŸ¤– Auto-Labeling ì‚¬ìš© ì„¤ëª…ì„œ

TurtleBot3 ì¹´ë©”ë¼ë¥¼ í™œìš©í•œ ë°˜ìë™ ë°ì´í„° ìˆ˜ì§‘ ë° ë¼ë²¨ë§ ì‹œìŠ¤í…œ

---

## ğŸ“‹ ì‚¬ì „ ì¤€ë¹„

### 1. í™˜ê²½ ì„¤ì •
```bash
cd /home/tuf/web_server/auto_labeling
pip install -r requirements.txt
```

### 2. TurtleBot3 ì¤€ë¹„
- TurtleBot3 ì „ì› ON
- ì¹´ë©”ë¼ ë…¸ë“œ ì‹¤í–‰ í™•ì¸
- ëŒ€ì‹œë³´ë“œì—ì„œ ì¹´ë©”ë¼ ìŠ¤íŠ¸ë¦¼ì´ ë³´ì´ëŠ”ì§€ í™•ì¸

### 3. ì¹´ë©”ë¼ ìŠ¤íŠ¸ë¦¼ URL í™•ì¸
- ê¸°ë³¸ê°’: `http://192.168.0.25:8000/video_feed_turtlebot`
- ëŒ€ì‹œë³´ë“œì—ì„œ ì¹´ë©”ë¼ í™”ë©´ì´ ë‚˜ì˜¤ë©´ ìŠ¤íŠ¸ë¦¼ì´ ì •ìƒ ì‘ë™ ì¤‘

---

## ğŸ¯ ë°ì´í„° ìˆ˜ì§‘ ë°©ë²•

### Step 1: ìƒˆë¡œìš´ ì‚¬ëŒ í´ë˜ìŠ¤ ì¶”ê°€
```bash
# ë³¸ì¸ ì´ë¦„ìœ¼ë¡œ í´ë˜ìŠ¤ ì¶”ê°€
python scripts/capture_and_label.py --add-person "í™ê¸¸ë™"

# ì—¬ëŸ¬ ì‚¬ëŒ ì¶”ê°€ ê°€ëŠ¥
python scripts/capture_and_label.py --add-person "ê¹€ì² ìˆ˜"
```

### Step 2: ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘
```bash
# ë³¸ì¸ ë°ì´í„° ìˆ˜ì§‘ (í´ë˜ìŠ¤ ID 1 = ì²«ë²ˆì§¸ ì¶”ê°€í•œ ì‚¬ëŒ)
python scripts/capture_and_label.py --class-id 1

# ë˜ëŠ” ìŠ¤íŠ¸ë¦¼ URL ì§ì ‘ ì§€ì •
python scripts/capture_and_label.py --stream "http://192.168.0.25:8000/video_feed_turtlebot" --class-id 1
```

### Step 3: ìº¡ì²˜ í™”ë©´ ì¡°ì‘ë²•

| í‚¤ | ê¸°ëŠ¥ |
|---|---|
| `SPACE` | í˜„ì¬ í”„ë ˆì„ ìˆ˜ë™ ì €ì¥ |
| `A` | ìë™ ì €ì¥ ëª¨ë“œ ON/OFF (1ì´ˆ ê°„ê²©) |
| `N` | ìƒˆë¡œìš´ ì‚¬ëŒ í´ë˜ìŠ¤ ì¶”ê°€ |
| `1-9` | í´ë˜ìŠ¤ ID ë³€ê²½ |
| `Q` | ì¢…ë£Œ |

### Step 4: íš¨ê³¼ì ì¸ ë°ì´í„° ìˆ˜ì§‘ íŒ
1. **ë‹¤ì–‘í•œ ê±°ë¦¬**: 0.5m ~ 3m ê±°ë¦¬ì—ì„œ ì´¬ì˜
2. **ë‹¤ì–‘í•œ ê°ë„**: ì •ë©´, ì¸¡ë©´, í›„ë©´
3. **ë‹¤ì–‘í•œ ìì„¸**: ì„œìˆê¸°, ì•‰ê¸°, ê±·ê¸°
4. **ìµœì†Œ ìˆ˜ëŸ‰**: í•œ ì‚¬ëŒë‹¹ 200~500ì¥ ê¶Œì¥
5. **ìë™ ëª¨ë“œ í™œìš©**: `A`í‚¤ë¡œ ìë™ ì €ì¥ ì¼œê³  ë¡œë´‡ ì•ì—ì„œ ì›€ì§ì´ê¸°

---

## ğŸ” ë¼ë²¨ ê²€í†  ë° ìˆ˜ì •

### ë¼ë²¨ ê²€í†  ë„êµ¬ ì‹¤í–‰
```bash
python scripts/review_labels.py
```

### ì¡°ì‘ë²•

| í‚¤ | ê¸°ëŠ¥ |
|---|---|
| `â†/â†’` (ë˜ëŠ” `A/D`) | ì´ì „/ë‹¤ìŒ ì´ë¯¸ì§€ |
| `â†‘/â†“` | ë°”ìš´ë”© ë°•ìŠ¤ ì„ íƒ |
| `1-9` | ì„ íƒëœ ë°•ìŠ¤ì˜ í´ë˜ìŠ¤ ë³€ê²½ |
| `D` | ì„ íƒëœ ë°•ìŠ¤ ì‚­ì œ |
| `S` | ì €ì¥ |
| `Q` | ì¢…ë£Œ |

---

## ğŸš€ ëª¨ë¸ í•™ìŠµ

### ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ í›„ í•™ìŠµ ì‹œì‘
```bash
# ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ í•™ìŠµ (GPU ì‚¬ìš©)
python scripts/train.py

# CPUë¡œ í•™ìŠµ (ëŠë¦¼)
python scripts/train.py --device cpu

# ì»¤ìŠ¤í…€ ì„¤ì •
python scripts/train.py --epochs 50 --batch 8 --imgsz 640
```

### í•™ìŠµ íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | ê¸°ë³¸ê°’ | ì„¤ëª… |
|---------|--------|------|
| `--epochs` | 100 | í•™ìŠµ ì—í­ ìˆ˜ |
| `--batch` | 16 | ë°°ì¹˜ í¬ê¸° (GPU ë©”ëª¨ë¦¬ì— ë”°ë¼ ì¡°ì •) |
| `--imgsz` | 640 | ì…ë ¥ ì´ë¯¸ì§€ í¬ê¸° |
| `--device` | 0 | GPU ID (cpu ê°€ëŠ¥) |

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
auto_labeling/
â”œâ”€â”€ dataset/
â”‚   â”œâ”€â”€ images/     â† ìº¡ì²˜ëœ ì´ë¯¸ì§€ ì €ì¥ ìœ„ì¹˜
â”‚   â””â”€â”€ labels/     â† YOLO í¬ë§· ë¼ë²¨ ì €ì¥ ìœ„ì¹˜
â”œâ”€â”€ models/         â† í•™ìŠµëœ ëª¨ë¸ ì €ì¥ ìœ„ì¹˜
â”‚   â””â”€â”€ user_detection/
â”‚       â””â”€â”€ weights/
â”‚           â”œâ”€â”€ best.pt   â† ìµœê³  ì„±ëŠ¥ ëª¨ë¸
â”‚           â””â”€â”€ last.pt   â† ë§ˆì§€ë§‰ ì²´í¬í¬ì¸íŠ¸
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ capture_and_label.py
â”‚   â”œâ”€â”€ review_labels.py
â”‚   â””â”€â”€ train.py
â”œâ”€â”€ classes.yaml    â† í´ë˜ìŠ¤ ì •ì˜
â””â”€â”€ requirements.txt
```

---

## âš ï¸ ë¬¸ì œ í•´ê²°

### ì¹´ë©”ë¼ ìŠ¤íŠ¸ë¦¼ ì—°ê²° ì‹¤íŒ¨
```bash
# ìŠ¤íŠ¸ë¦¼ URL í™•ì¸
curl http://192.168.0.25:8000/video_feed_turtlebot
```

### YOLO ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜
```bash
# ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ
pip install ultralytics --upgrade
```

### GPU ë©”ëª¨ë¦¬ ë¶€ì¡±
```bash
# ë°°ì¹˜ í¬ê¸° ì¤„ì´ê¸°
python scripts/train.py --batch 4
```

---

## ğŸ“Š ê¶Œì¥ ë°ì´í„° ìˆ˜ì§‘ëŸ‰

| í´ë˜ìŠ¤ ìˆ˜ | í´ë˜ìŠ¤ë‹¹ ì´ë¯¸ì§€ | ì´ ì´ë¯¸ì§€ |
|----------|----------------|----------|
| 1ëª… | 300~500ì¥ | 300~500ì¥ |
| 2ëª… | 200~300ì¥ | 400~600ì¥ |
| 3ëª…+ | 150~200ì¥ | 450~600ì¥+ |

---

## ğŸ¬ ë¹ ë¥¸ ì‹œì‘ ìš”ì•½

```bash
# 1. í™˜ê²½ ì¤€ë¹„
cd /home/tuf/web_server/auto_labeling
pip install -r requirements.txt

# 2. ë³¸ì¸ í´ë˜ìŠ¤ ì¶”ê°€
python scripts/capture_and_label.py --add-person "ë‚´ì´ë¦„"

# 3. ë°ì´í„° ìˆ˜ì§‘ (ë¡œë´‡ ì•ì—ì„œ ì´¬ì˜)
cd /home/tuf/web_server/auto_labeling
poetry run python scripts/capture_and_label.py --class-id 1

poetry run python auto_labeling/scripts/capture_and_label.py --class-id 1


# 4. ë¼ë²¨ ê²€í†  (ì„ íƒì‚¬í•­)
python scripts/review_labels.py

# 5. ëª¨ë¸ í•™ìŠµ
python scripts/train.py --epochs 50
```
